{
  "kind": "coverage_report",
  "version": "1.0",
  "generatedAt": "2026-02-25T11:37:14.755Z",
  "sources": {
    "buildRequest": true,
    "implementationPlan": true
  },
  "requirements": {
    "total": 6,
    "implemented": 4,
    "items": [
      {
        "id": "REQ-23",
        "summary": "Update the backend Motoko actor so that proof file data (proofFile blob/path, submittedBy, submissionTimestamp) stored on a task record is only returned in query responses to the Admin role or the employee who is the assignedTo principal of that specific task. For all other callers, these fields must be omitted or nulled out in the returned task record.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-24",
        "summary": "Extend the task data model in the Motoko backend to ensure that when an employee uploads proof, the task stores: proofFile (safe relative URL or blob key — never a full server path), submittedByName (employee full name), submittedByEmail (employee email), and submissionTimestamp (nanosecond timestamp). The task's approvalStatus must be set to #pendingReview upon proof upload, and status must transition to Blue (#blue) at that point.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-25",
        "summary": "On the Employee Dashboard (EmployeeDashboard.tsx / ProofUploadButton.tsx), ensure that: (1) each employee can only see their own uploaded proof file (rendered inline or as a link) within their own task card; (2) proof files belonging to other employees are never fetched or displayed; (3) after upload, a 'Pending Review' label or badge appears on the task card to communicate status to the employee.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/components/TaskCard.tsx",
          "frontend/src/components/StatusBadge.tsx",
          "frontend/src/pages/EmployeeDashboard.tsx"
        ],
        "matchedFiles": [
          "frontend/src/components/TaskCard.tsx",
          "frontend/src/components/StatusBadge.tsx",
          "frontend/src/pages/EmployeeDashboard.tsx"
        ]
      },
      {
        "id": "REQ-26",
        "summary": "In the Admin Dashboard → All Tasks view (AdminDashboard.tsx / GlobalTaskList.tsx / TaskCard.tsx), add Admin-only visible fields to each task entry: a blue 'Proof Uploaded' badge (shown when proofFile exists), a 'View Proof' button that fetches and opens the proof (image preview or PDF) in a modal or new tab, a 'Download Proof' option, the Submission Timestamp formatted as a human-readable date/time string, and the Submitted By field showing Employee Name and Email. These fields must be completely hidden for Manager and Employee roles.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/components/TaskCard.tsx",
          "frontend/src/components/GlobalTaskList.tsx",
          "frontend/src/components/ProofPreviewModal.tsx",
          "frontend/src/pages/AdminDashboard.tsx"
        ],
        "matchedFiles": [
          "frontend/src/components/TaskCard.tsx",
          "frontend/src/components/GlobalTaskList.tsx",
          "frontend/src/components/ProofPreviewModal.tsx",
          "frontend/src/pages/AdminDashboard.tsx"
        ]
      },
      {
        "id": "REQ-27",
        "summary": "Add an Admin-only Proof Review Panel section inside the Admin Task detail/expanded view in the Admin Dashboard. The panel must display: Employee Name, an uploaded file preview (image thumbnail or PDF icon with filename), Uploaded Date & Time, an Approve button (calls the existing approve mutation), and a Reject button that opens a modal requiring a rejection reason text input before submission. Add three status indicator badges used throughout the Admin view: a blue badge labelled 'Proof Uploaded', a green badge labelled 'Approved', and a red badge labelled 'Rejected', reflecting the current approvalStatus of the task.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/components/ProofReviewPanel.tsx",
          "frontend/src/components/StatusBadge.tsx",
          "frontend/src/components/TaskCard.tsx",
          "frontend/src/components/GlobalTaskList.tsx"
        ],
        "matchedFiles": [
          "frontend/src/components/ProofReviewPanel.tsx",
          "frontend/src/components/StatusBadge.tsx",
          "frontend/src/components/TaskCard.tsx",
          "frontend/src/components/GlobalTaskList.tsx"
        ]
      },
      {
        "id": "REQ-28",
        "summary": "Update the useQueries.ts hooks and any relevant React Query fetch logic to ensure: (1) proof-related fields (proofFile URL, submittedByName, submittedByEmail, submissionTimestamp) are only requested and stored client-side when the authenticated user is Admin or the task's own assignee; (2) a getProofForTask(taskId) query hook is added that calls the protected backend query and is only invoked from Admin-role views or the employee's own task view.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/hooks/useQueries.ts",
          "frontend/src/components/TaskCard.tsx",
          "frontend/src/components/ProofReviewPanel.tsx"
        ],
        "matchedFiles": [
          "frontend/src/hooks/useQueries.ts",
          "frontend/src/components/TaskCard.tsx",
          "frontend/src/components/ProofReviewPanel.tsx"
        ]
      }
    ]
  },
  "changedFiles": [
    "backend/main.mo",
    "backend/migration.mo",
    "build-request.json",
    "feature_evidence.json",
    "frontend-file-summaries.txt",
    "frontend-implementation-plan.json",
    "frontend/src/backend.d.ts",
    "frontend/src/backend.ts",
    "frontend/src/components/DeleteUserConfirmDialog.tsx",
    "frontend/src/components/DepartmentProductivityPanel.tsx",
    "frontend/src/components/EditUserRoleModal.tsx",
    "frontend/src/components/GlobalTaskList.tsx",
    "frontend/src/components/LeaderboardTable.tsx",
    "frontend/src/components/ProofPreviewModal.tsx",
    "frontend/src/components/ProofReviewPanel.tsx",
    "frontend/src/components/ProofUploadButton.tsx",
    "frontend/src/components/RejectTaskModal.tsx",
    "frontend/src/components/StatusBadge.tsx",
    "frontend/src/components/TaskApprovalActions.tsx",
    "frontend/src/components/TaskCard.tsx",
    "frontend/src/declarations/backend.did.d.ts",
    "frontend/src/declarations/backend.did.js",
    "frontend/src/hooks/useQueries.ts",
    "frontend/src/pages/AdminDashboard.tsx",
    "frontend/src/pages/EmployeeDashboard.tsx",
    "project_state.json",
    "scratch/component-selection.json",
    "spec.md",
    "spec_vs_diff_report.json"
  ]
}